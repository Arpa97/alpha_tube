<!DOCTYPE html>
<html>
   <head>

        <!-- gapi -->
        <script src="https://apis.google.com/js/api.js"></script>

        <!-- jquery -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

        <script type="text/javascript">

            //alert('prima delle variabili');

            var key = 'AIzaSyA0NwqdqMCpS9JbXNaCYIyjwnrs8diZcU8' ;   // apiKey di gruppo
            // var key = 'AIzaSyDRl1b7nNOmVfgMLntmEj7qRkUAvykHO9U' ;   // apiKey mia

            //alert('prima di load');

            // 1. Loads the JavaScript client library and invokes `start` afterwards.
            gapi.load('client', start);

            //alert('prima di start');

            function start(){

                //alert('prima di init');

                // 2. Initialize the JavaScript client library.
                gapi.client.init({
                    'apiKey': key
                });

                //alert('prima di jquery');

                $.ajax({
                    url: "https://www.googleapis.com/youtube/v3/search",
                    method: 'GET',
                    dataType: "json",
                    data: {
                        key: key,
                        part: "snippet",
                        q: "cats"
                    },
                    success: function(data){
                        //alert('Caricamento effettuato');

                        var yt_id = data.items[0].id.videoId ;

						//alert('dopo yt_id');

                        $('body').append('<br><iframe src="https://www.youtube.com/embed/' + yt_id + '"></iframe>');
                    },
                    error: function(err){
                        //alert('Caricamento NON effettuato');
                    }
                });

                //alert('YEEEEEEEE');
            }

        </script>
    </head>

    <body>

        <button type="button" onclick="start()">Clicca qui</button>

    </body>
</html>

